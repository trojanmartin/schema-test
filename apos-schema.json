{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://datapac.sk/schemas/applicationmanagementconfiguration-schema.json",
  "title": "ApplicationManagementConfiguration Configuration Schema",
  "type": "object",
  "properties": {
    "behavior": {
      "type": "object",
      "description": "Device Behavior Configuration.",
      "properties": {
        "automaticDeviceRestart": {
          "type": "boolean",
          "description": "Automatic Device Restart Config."
        },
        "automaticDeviceRestartTime": {
          "type": "string",
          "description": "Automatic Device Restart Time Config."
        },
        "maxItemsPerSynchronizationCycle": {
          "type": "number",
          "description": "Max Items Per Synchronization Cycle Config."
        }
      }
    },
    "cashDrawerConfiguration": {
      "type": "object",
      "description": "Cash drawer configuration.",
      "properties": {
        "openCashDrawerMode": {
          "type": "number",
          "description": "Open cash drawer mode.",
          "default": "3"
        }
      }
    },
    "closureSettings": {
      "type": "object",
      "description": "Definition for closure process.",
      "properties": {
        "closureConfigurations": {
          "type": "object",
          "description": "Definition for closure process.",
          "properties": {
            "autoEndShift": {
              "type": "boolean",
              "description": "Indicates if shift should be ended automatically."
            },
            "autoStartShift": {
              "type": "boolean",
              "description": "Indicates if shift should be started automatically."
            },
            "automatedDeposit": {
              "type": "boolean",
              "description": "Indicates if initial deposit should be made automatically."
            },
            "automatedDepositAmount": {
              "type": "object",
              "description": "Amounts of automated deposit."
            },
            "automatedWithdrawal": {
              "type": "boolean",
              "description": "Indicates if there should be made automated cash withdrawal after closure."
            },
            "automaticallyCloseShiftBeforeFiscal": {
              "type": "boolean",
              "description": "Indicates if shift should be closed automatically before fiscal day."
            },
            "cashCurrencies": {
              "type": "object",
              "description": "Currency ISO codes which should be included in closure."
            },
            "depositCashMovementTypeCode": {
              "type": "string",
              "description": "Cash movement type code which should be used for initial deposit."
            },
            "fiscalDayCloseMode": {
              "type": "string",
              "description": "Fiscal day close mode."
            },
            "fiscalDayOpenMode": {
              "type": "string",
              "description": "Fiscal day open mode."
            },
            "maxCashCountAttempts": {
              "type": "number",
              "description": "Maximum count of entering wrong counted MOPs."
            },
            "minimalCashBalance": {
              "type": "object",
              "description": "Minimal amount which should be in cash location after closure."
            },
            "minimalDeposit": {
              "type": "object",
              "description": "Minimal amount of specific currency which should be in cash location when closure was started."
            },
            "minimalDepositOverride": {
              "type": "boolean",
              "description": "Indicates if closure can be started with cash amount below minimal deposit."
            },
            "mops": {
              "type": "object",
              "description": "Methods of payment configuration."
            },
            "period": {
              "type": "string",
              "description": "Closure configuration period enumeration."
            },
            "runType": {
              "type": "string",
              "description": "Closure configuration run type enumeration."
            },
            "saleOnlySameCashier": {
              "type": "boolean",
              "description": "Indicates if only cashier which open day can sell."
            },
            "scheduleDays": {
              "type": "object",
              "description": "Schedule days configuration."
            },
            "scheduleTime": {
              "type": "string",
              "description": "Schedule time configuration."
            },
            "scheduledStartAutomated": {
              "type": "boolean",
              "description": "Indicates if scheduled start is automated."
            },
            "scheduledStartTime": {
              "type": "string",
              "description": "Scheduled start time."
            },
            "status": {
              "type": "string",
              "description": "Closure configuration status enumeration."
            },
            "type": {
              "type": "string",
              "description": "Closure configuration type enumeration."
            },
            "warningBefore": {
              "type": "string",
              "description": "Warning before closure time."
            },
            "withdrawalCashMovementTypeCode": {
              "type": "string",
              "description": "Cash movement type code which should be used for cash withdrawal after closure."
            },
            "withdrawalLimit": {
              "type": "object",
              "description": "Withdrawal limit amounts."
            },
            "withdrawalMandatory": {
              "type": "boolean",
              "description": "Indicates if cash withdrawal is required after closure."
            }
          }
        }
      }
    },
    "couponNumberMatchPattern": {
      "type": "string",
      "description": "Coupon Number Match Pattern."
    },
    "customerApiSettings": {
      "type": "object",
      "description": "Customer external api settings.",
      "properties": {
        "baseUrl": {
          "type": "string",
          "description": "Base url."
        }
      }
    },
    "customerDisplayConfiguration": {
      "type": "object",
      "description": "Customer Display settings.",
      "properties": {
        "adsConfiguration": {
          "type": "object",
          "description": "Ads Configuration.",
          "properties": {
            "checkingInterval": {
              "type": "string",
              "description": "Checking Interval"
            },
            "idleScreenTimeout": {
              "type": "string",
              "description": "Idle Screen Timeout"
            },
            "mediaApiUrl": {
              "type": "string",
              "description": "Media api url"
            },
            "rotationInterval": {
              "type": "string",
              "description": "Rotation Interval"
            }
          }
        },
        "customerDisplayBg": {
          "type": "string",
          "description": "Customer display background image."
        }
      }
    },
    "discountConfiguration": {
      "type": "object",
      "description": "Discount configuration for application.",
      "properties": {
        "discountEngines": {
          "type": "object",
          "description": "List of available discount engines."
        },
        "discountEnginesCombinations": {
          "type": "object",
          "description": "Discount engines combinations matrix."
        },
        "discountServiceResponseTimeout": {
          "type": "number",
          "description": "Timeout for discount server response in milliseconds.",
          "default": "5000"
        },
        "discountServiceUrl": {
          "type": "string",
          "description": "Discount service URL."
        }
      }
    },
    "eventBus": {
      "type": "object",
      "description": "Event bus settings.",
      "properties": {
        "host": {
          "type": "string",
          "description": "RabbitMQ server host name."
        },
        "platformExchange": {
          "type": "string",
          "description": "Platform Exchange."
        },
        "port": {
          "type": "number",
          "description": "RabbitMQ server port."
        },
        "retryCount": {
          "type": "number",
          "description": "Number of retries on failure.",
          "default": "5"
        },
        "tlsPort": {
          "type": "number",
          "description": "Tls port."
        },
        "tlsServerName": {
          "type": "string",
          "description": "Tls server name."
        },
        "useTls": {
          "type": "boolean",
          "description": "True when use tls.",
          "default": "false"
        },
        "virtualHost": {
          "type": "string",
          "description": "RabbitMQ server virtual host."
        }
      }
    },
    "forecourtConfiguration": {
      "type": "object",
      "description": "Forecourt Configuration.",
      "properties": {
        "dispenserSalesPriceMismatchHandle": {
          "type": "object",
          "description": "Dispenser Sales Price Mismatc hHandle Configuration."
        },
        "dispenserTotalPriceMismatchHandle": {
          "type": "object",
          "description": "Dispenser Total Price Mismatch Handle Configuration."
        }
      }
    },
    "jarvisSettings": {
      "type": "object",
      "description": "PoN - Jarvis settings.",
      "properties": {
        "baseUrl": {
          "type": "string",
          "description": "Base URL of Jarvis API."
        },
        "timeoutInMilliseconds": {
          "type": "number",
          "description": "Timeout in milliseconds for requests to Jarvis API.",
          "default": "5000"
        }
      }
    },
    "mopConfiguration": {
      "type": "object",
      "description": "Configuration for mop setup.",
      "properties": {
        "allowedMopCodes": {
          "type": "object",
          "description": "List of allowed MoP codes. If empty, all MoP codes are allowed."
        },
        "fleetCardsParsingMethods": {
          "type": "object",
          "description": "Custom mapping for fleet cards data parsing (customer, license plate, etc.) (temporary solution). Mapping is defined by pair Issuer.Code and Parsing method. This definition should be moved into card issuer definition."
        },
        "mopTerminalAssignment": {
          "type": "object",
          "description": "MOP to terminal assignment."
        }
      }
    },
    "oecOptions": {
      "type": "object",
      "description": "FisCat options for fiscal setup.",
      "properties": {
        "additionalQrCodeInfo": {
          "type": "string",
          "description": "Some information to second QR code."
        },
        "baseAddress": {
          "type": "string",
          "description": "Schema, host and port of OEC."
        },
        "bigFontDisable": {
          "type": "string",
          "description": "Big font disable printer sequence.",
          "default": "\\x1D\\x21\\x00"
        },
        "bigFontEnable": {
          "type": "string",
          "description": "Big font enable printer sequence.",
          "default": "\\x1D\\x21\\x01"
        },
        "boldDisable": {
          "type": "string",
          "description": "Bold disable printer sequence.",
          "default": "\\x1B\\x21\\x00"
        },
        "boldEnable": {
          "type": "string",
          "description": "Bold enable printer sequence.",
          "default": "\\x1B\\x21\\x18"
        },
        "cashRegisterCode": {
          "type": "string",
          "description": "Cash register code."
        },
        "centerTextDisable": {
          "type": "string",
          "description": "Sequence to disable centered text.",
          "default": "\\x1B\\x61\\x00"
        },
        "centerTextEnable": {
          "type": "string",
          "description": "Sequence to enable centered text.",
          "default": "\\x1B\\x61\\x01"
        },
        "emailReceiptRenderer": {
          "type": "boolean",
          "description": "Email receipt renderer."
        },
        "freePrintFeedLines": {
          "type": "number",
          "description": "How many lines should be fed after free print."
        },
        "oecLocation": {
          "type": "object",
          "description": "Location of OEC."
        },
        "paperWidth": {
          "type": "string",
          "description": "Paper width for printing."
        },
        "qrCodeSequence": {
          "type": "string",
          "description": "Fiscal UUID QR code printer sequence.",
          "default": "\\x1B\\x61\\x31\\x1D\\x28\\x6B\\x04\\x00\\x31\\x41\\x32\\x00\\x1D\\x28\\x6B\\x03\\x00\\x31\\x43\\x05\\x1D\\x28\\x6B\\x03\\x00\\x31\\x45\\x31\\x1D\\x28\\x6B[len:16]\\x31\\x50\\x30[code]\\x1D\\x28\\x6B\\x03\\x00\\x31\\x51\\x30\\x1B\\x61\\x30"
        }
      }
    },
    "platformSettings": {
      "type": "object",
      "description": "Application settings.",
      "properties": {
        "healthUrl": {
          "type": "string",
          "description": "Platform URL for checking platform state."
        }
      }
    },
    "posApi": {
      "type": "object",
      "description": "PosApi settings.",
      "properties": {
        "port": {
          "type": "number",
          "description": "Port."
        }
      }
    },
    "recovery": {
      "type": "object",
      "description": "Recovery settings.",
      "properties": {
        "cash": {
          "type": "number",
          "description": "Cash recovery Id.",
          "default": "0"
        },
        "closure": {
          "type": "number",
          "description": "Closure recovery Id.",
          "default": "0"
        },
        "sales": {
          "type": "number",
          "description": "Sales recovery Id.",
          "default": "0"
        }
      }
    },
    "salesSetting": {
      "type": "object",
      "description": "Sales settings for application.",
      "properties": {
        "bankCardMode": {
          "type": "number",
          "description": "Bank card mode."
        },
        "defaultCancellationReason": {
          "type": "string",
          "description": "Default cancellation reason."
        },
        "doubleVat": {
          "type": "number",
          "description": "Type of double vat.",
          "default": "1"
        },
        "includePrintout": {
          "type": "boolean",
          "description": "Indicates if printout should be included in business documents (sales transaction, closure, etc.).",
          "default": "true"
        },
        "receiptTailMessage": {
          "type": "object",
          "description": "Lines of custom receipt tail message."
        }
      }
    },
    "siteControllerConfiguration": {
      "type": "object",
      "description": "Site controller configuration.",
      "properties": {
        "baseUrl": {
          "type": "string",
          "description": "Site controller hub URL."
        },
        "fuelPointTotalsTimeout": {
          "type": "number",
          "description": "Fuel point totals timeout."
        },
        "hubReconnectDelay": {
          "type": "number",
          "description": "Site controller hub reconnect delay in milliseconds."
        },
        "reloadViewDelay": {
          "type": "number",
          "description": "Reload view delay in milliseconds.",
          "default": "350"
        }
      }
    },
    "stornoSettings": {
      "type": "object",
      "description": "Storno settings.",
      "properties": {
        "ignoreOriginalFiscalCode": {
          "type": "boolean",
          "description": "Define if original fiscal code is required for storno.",
          "default": "false"
        }
      }
    },
    "telemetry": {
      "type": "object",
      "description": "Telemetry Configuration.",
      "properties": {
        "connectionString": {
          "type": "string",
          "description": "Connection Config."
        }
      }
    },
    "tomra": {
      "type": "object",
      "description": "Tomra settings.",
      "properties": {
        "active": {
          "type": "boolean",
          "description": "True if TOMRA is active, otherwise false.",
          "default": "false"
        },
        "ignoreStoreId": {
          "type": "boolean",
          "description": "True if TOMRA store id should be ignored, otherwise false."
        },
        "prefix": {
          "type": "string",
          "description": "TOMRA prefix.",
          "default": "981"
        },
        "productNumber": {
          "type": "string",
          "description": "TOMRA product number."
        },
        "refundEnabled": {
          "type": "boolean",
          "description": "True if TOMRA refund is available, otherwise false."
        },
        "storeId": {
          "type": "string",
          "description": "TOMRA store id."
        }
      }
    }
  }
}